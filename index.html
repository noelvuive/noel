<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 - BON VINH BOSS</title>
    <style>
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #000; overflow: hidden; 
            font-family: 'Arial', sans-serif;
            touch-action: none;
        }
        canvas { position: absolute; top: 0; left: 0; z-index: 5; }
        #text-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #fff; font-size: 70px; font-weight: bold; text-align: center;
            z-index: 10; pointer-events: none; width: 95%;
            letter-spacing: 35px; /* Đéo bao giờ dính chữ nữa */
            white-space: pre-wrap;
            line-height: 1.6;
        }
        .wish-text { 
            font-size: 22px !important; 
            color: #ff3333 !important; 
            letter-spacing: 5px !important; 
            font-weight: bold !important;
            text-shadow: 0 0 10px rgba(255,0,0,0.5);
        }
        #pen {
            position: absolute; font-size: 35px; z-index: 20;
            display: none; pointer-events: none;
            transition: none;
        }
    </style>
</head>
<body>

<div id="text-overlay"></div>
<div id="pen">✏️</div>
<canvas id="canvas"></canvas>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const textOverlay = document.getElementById('text-overlay');
    const pen = document.getElementById('pen');
    
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const wishes = [
        "Chúc bạn năm 2026 rực rỡ,\nVạn sự hanh thông,\nSức khỏe dồi dào,\nHạnh phúc đong đầy.",
        "Gửi ngàn lời chúc tốt đẹp nhất,\nHy vọng 2026 là năm bùng nổ,\nThành công vang dội,\nMọi điều như ý!"
    ];

    function getHeartPoint(t, scale) {
        const x = 16 * Math.pow(Math.sin(t), 3);
        const y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
        return {
            x: x * scale + canvas.width / 2,
            y: y * scale + canvas.height / 2
        };
    }

    async function typeText(text, isWish = false) {
        textOverlay.innerText = "";
        if(isWish) textOverlay.classList.add('wish-text');
        else textOverlay.classList.remove('wish-text');

        const chars = Array.from(text);
        for (let char of chars) {
            textOverlay.innerText += char;
            await new Promise(r => setTimeout(r, 100));
        }
    }

    async function start() {
        // 1. Đếm ngược 3 2 1
        for (let i = 3; i > 0; i--) {
            textOverlay.innerText = i;
            await new Promise(r => setTimeout(r, 1000));
        }
        textOverlay.innerText = "";

        // 2. Gõ 2026
        await typeText("2026");
        await new Promise(r => setTimeout(r, 1500));
        textOverlay.innerText = "";

        // 3. Hiện bút và vẽ
        pen.style.display = "block";
        await new Promise(r => setTimeout(r, 1000));

        const scale = window.innerWidth < 500 ? 10 : 15;
        ctx.strokeStyle = "red";
        ctx.lineWidth = 5;
        ctx.lineCap = "round";
        
        // Bắt đầu vẽ nét
        let t = 0;
        ctx.beginPath();
        const startP = getHeartPoint(0, scale);
        ctx.moveTo(startP.x, startP.y);

        while (t <= Math.PI * 2) {
            const p = getHeartPoint(t, scale);
            ctx.lineTo(p.x, p.y);
            ctx.stroke();
            pen.style.left = (p.x) + "px";
            pen.style.top = (p.y) + "px";
            t += 0.05;
            await new Promise(r => setTimeout(r, 20));
        }
        ctx.closePath();
        
        // 4. Tô màu đỏ rực
        ctx.fillStyle = "red";
        ctx.fill();
        pen.style.display = "none";
        await new Promise(r => setTimeout(r, 1500));

        // 5. Hiệu ứng tan biến (Hạt particles ảo ma)
        let particles = [];
        for(let i=0; i<400; i++) {
            const p = getHeartPoint(Math.random() * Math.PI * 2, scale);
            particles.push({
                x: p.x, y: p.y,
                vx: (Math.random() - 0.5) * 10,
                vy: (Math.random() - 0.5) * 10,
                life: 1
            });
        }

        const fadeOut = setInterval(() => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                p.x += p.vx; p.y += p.vy; p.life -= 0.02;
                ctx.fillStyle = `rgba(255, 0, 0, ${p.life})`;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
                ctx.fill();
            });
            particles = particles.filter(p => p.life > 0);
            if(particles.length === 0) clearInterval(fadeOut);
        }, 30);

        await new Promise(r => setTimeout(r, 2000));

        // 6. Lời chúc
        for (let wish of wishes) {
            await typeText(wish, true);
            await new Promise(r => setTimeout(r, 4000));
            textOverlay.innerText = "";
            await new Promise(r => setTimeout(r, 1000));
        }
    }

    window.onload = start;
</script>
</body>
</html>
