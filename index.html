<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 - BON VINH BOSS</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Arial', sans-serif; }
        canvas { position: absolute; top: 0; left: 0; }
        #text-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #fff; text-align: center; z-index: 10; pointer-events: none; width: 100%;
        }
        .word { display: inline-block; margin: 0 15px; font-size: 45px; font-weight: bold; color: #fff; text-shadow: 0 0 10px #fff; }
        .wish-text .word { font-size: 26px !important; color: #ff3333 !important; text-shadow: 0 0 5px #ff0000; }
    </style>
</head>
<body>
    <div id="text-overlay"></div>
    <canvas id="canvas"></canvas>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const textOverlay = document.getElementById('text-overlay');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particles = [];
    let rockets = [];
    let state = "START";

    const wishes = [
        "Chúc Mừng Năm Mới 2026",
        "Vạn Sự Hanh Thông Tỷ Sự Như Mơ",
        "Sức Khỏe Dồi Dào Tài Lộc Tới",
        "Hạnh Phúc Đong Đầy Mọi Nẻo",
        "Thành Công Vang Dội Tuổi Trẻ",
        "Bình An Mạnh Khỏe Mỗi Ngày",
        "Chào Đón 2026 Bùng Nổ Rạng Ngời"
    ];

    async function typeText(text, isWish = false) {
        textOverlay.innerHTML = "";
        textOverlay.className = isWish ? "wish-text" : "";
        let words = text.split(" ");
        for (let word of words) {
            let span = document.createElement("span");
            span.className = "word";
            span.innerText = word;
            textOverlay.appendChild(span);
            await new Promise(r => setTimeout(r, 250));
        }
    }

    class Rocket {
        constructor(x, targetY, type) {
            this.x = x;
            this.y = canvas.height;
            this.targetY = targetY;
            this.type = type; // 'normal', 'heart', '2026'
            this.speed = 2 + Math.random() * 2;
            this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
            this.alive = true;
        }
        update() {
            this.y -= this.speed;
            if (this.y <= this.targetY) {
                this.explode();
                this.alive = false;
            }
        }
        draw() {
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
            ctx.fill();
            // Đuôi khói
            particles.push(new Particle(this.x, this.y, this.color, false));
        }
        explode() {
            if (this.type === 'heart') {
                for (let t = 0; t < Math.PI * 2; t += 0.15) {
                    const vx = 16 * Math.pow(Math.sin(t), 3) * 0.5;
                    const vy = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t)) * 0.5;
                    particles.push(new Particle(this.x, this.y, 'red', true, vx, vy));
                }
            } else if (this.type === '2026') {
                // Tạo hiệu ứng nổ lan tỏa rộng đại diện cho 2026
                for (let i = 0; i < 100; i++) {
                    particles.push(new Particle(this.x, this.y, '#fff', true));
                }
            } else {
                for (let i = 0; i < 80; i++) {
                    particles.push(new Particle(this.x, this.y, this.color, true));
                }
            }
        }
    }

    class Particle {
        constructor(x, y, color, explode, vx, vy) {
            this.x = x;
            this.y = y;
            this.color = color;
            this.vx = vx || (Math.random() - 0.5) * (explode ? 10 : 2);
            this.vy = vy || (Math.random() - 0.5) * (explode ? 10 : 2);
            this.life = 1;
            this.decay = Math.random() * 0.02 + 0.01;
            this.gravity = explode ? 0.15 : 0;
        }
        update() {
            this.vx *= 0.95;
            this.vy *= 0.95;
            this.vy += this.gravity;
            this.x += this.vx;
            this.y += this.vy;
            this.life -= this.decay;
        }
        draw() {
            ctx.globalAlpha = this.life;
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    async function run() {
        for (let i = 3; i > 0; i--) { 
            textOverlay.innerHTML = `<div class="word" style="font-size:120px">${i}</div>`; 
            await new Promise(r => setTimeout(r, 1000)); 
        }
        await typeText("Năm Mới 2026");
        await new Promise(r => setTimeout(r, 2000));
        textOverlay.innerHTML = "";

        for (let wish of wishes) {
            await typeText(wish, true);
            rockets.push(new Rocket(canvas.width/2, canvas.height/3, 'normal'));
            await new Promise(r => setTimeout(r, 3000));
            textOverlay.innerHTML = "";
        }

        textOverlay.innerHTML = `<div class="word" style="color:#0f0; font-size:30px">QUAY MÀN HÌNH NGANG ĐI ĐẠI CA!</div>`;
        state = "WAIT_ROTATE";
    }

    function loop() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        if (window.innerWidth > window.innerHeight && state === "WAIT_ROTATE") {
            state = "FIREWORKS_SHOW";
            textOverlay.innerHTML = "";
        }

        if (state === "FIREWORKS_SHOW") {
            if (Math.random() < 0.05) {
                let type = 'normal';
                let rand = Math.random();
                if (rand > 0.8) type = 'heart';
                else if (rand > 0.6) type = '2026';
                rockets.push(new Rocket(Math.random() * canvas.width, Math.random() * canvas.height/2, type));
            }
        }

        rockets.forEach((r, i) => {
            r.update();
            r.draw();
            if (!r.alive) rockets.splice(i, 1);
        });

        particles.forEach((p, i) => {
            p.update();
            p.draw();
            if (p.life <= 0) particles.splice(i, 1);
        });

        requestAnimationFrame(loop);
    }

    window.addEventListener('resize', () => { 
        canvas.width = window.innerWidth; 
        canvas.height = window.innerHeight; 
    });

    run(); loop();
</script>
</body>
</html>
