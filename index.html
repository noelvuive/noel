<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 - BON VINH BOSS</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Arial', sans-serif; }
        canvas { position: absolute; top: 0; left: 0; }
        #text-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #fff; font-size: 55px; font-weight: bold; text-align: center;
            z-index: 10; pointer-events: none; width: 90%;
            line-height: 1.6; text-shadow: 0 0 15px rgba(255,255,255,0.5);
        }
        .wish-text { font-size: 26px !important; color: #ff3333 !important; }
    </style>
</head>
<body>
    <div id="text-overlay"></div>
    <div id="pen">✏️</div>
    <canvas id="canvas"></canvas>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const textOverlay = document.getElementById('text-overlay');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particles = [];
    let state = "START";
    const wishes = [
        "Chúc Mừng Năm Mới 2026 Rực Rỡ",
        "Vạn Sự Hanh Thông Tỷ Sự Như Mơ",
        "Sức Khỏe Dồi Dào Tài Lộc Tới",
        "Hạnh Phúc Đong Đầy Mọi Nẻo Đường",
        "Thành Công Vang Dội Tuổi Trẻ",
        "Bình An Và Mạnh Khỏe Mỗi Ngày",
        "Chào Đón 2026 Bùng Nổ Rạng Ngời"
    ];

    async function typeText(text, isWish = false) {
        textOverlay.innerText = "";
        if(isWish) textOverlay.classList.add('wish-text');
        else textOverlay.classList.remove('wish-text');
        
        let words = text.split(" ");
        for (let i = 0; i < words.length; i++) {
            textOverlay.innerText += words[i] + " "; // Thêm khoảng trắng thật để chữ không dính
            await new Promise(r => setTimeout(r, 200));
        }
    }

    function createFirework(x, y, color) {
        for(let i=0; i<80; i++) {
            particles.push({
                x, y, vx: (Math.random()-0.5)*10, vy: (Math.random()-0.5)*10,
                life: 1, color: color, gravity: 0.12
            });
        }
    }

    async function run() {
        // 1. Đếm ngược
        for (let i = 3; i > 0; i--) { textOverlay.innerText = i; await new Promise(r => setTimeout(r, 1000)); }
        
        // 2. Chữ 2026 to đẹp
        await typeText("Năm Mới 2026");
        await new Promise(r => setTimeout(r, 1500));
        textOverlay.innerText = "";

        // 3. Vẽ Trái Tim (Rút gọn cho nhanh)
        state = "HEART";
        ctx.strokeStyle = "red"; ctx.lineWidth = 4; ctx.beginPath();
        for (let t = 0; t <= Math.PI * 2; t += 0.1) {
            const scale = 12;
            const x = 16 * Math.pow(Math.sin(t), 3) * scale + canvas.width/2;
            const y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t)) * scale + canvas.height/2;
            ctx.lineTo(x, y); ctx.stroke();
            await new Promise(r => setTimeout(r, 20));
        }
        ctx.fillStyle = "red"; ctx.fill();
        await new Promise(r => setTimeout(r, 1000));
        ctx.clearRect(0,0,canvas.width,canvas.height);

        // 4. 7 Lời chúc tan biến
        for (let wish of wishes) {
            await typeText(wish, true);
            await new Promise(r => setTimeout(r, 2000));
            createFirework(canvas.width/2, canvas.height/2, 'red');
            textOverlay.innerText = "";
            await new Promise(r => setTimeout(r, 800));
        }

        // 5. Yêu cầu quay ngang
        textOverlay.style.color = "#00ff00";
        textOverlay.innerText = "BẠN QUAY MÀN HÌNH NGANG ĐI!";
        state = "WAIT_ROTATE";
    }

    function drawCity() {
        const ground = canvas.height * 0.9;
        // Vẽ skyline thành phố
        for(let i=0; i<canvas.width; i+=60) {
            const h = 150 + Math.sin(i)*50;
            ctx.fillStyle = "#0a0a0a";
            ctx.fillRect(i, ground - h, 50, h);
            // Cửa sổ phát sáng
            ctx.fillStyle = "#ff0";
            for(let row=1; row<4; row++) {
                for(let col=1; col<3; col++) {
                    if(Math.random() > 0.3) ctx.fillRect(i + col*15, ground - h + row*30, 8, 8);
                }
            }
        }
        ctx.fillStyle = "#050505";
        ctx.fillRect(0, ground, canvas.width, canvas.height * 0.1);
    }

    function loop() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.15)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        if (window.innerWidth > window.innerHeight && state === "WAIT_ROTATE") {
            state = "CITY_VIEW";
            textOverlay.innerText = "";
        }

        if (state === "CITY_VIEW") {
            drawCity();
            if(Math.random() > 0.96) createFirework(Math.random()*canvas.width, Math.random()*canvas.height/3, `hsl(${Math.random()*360},100%,60%)`);
        }

        particles.forEach((p, i) => {
            p.x += p.vx; p.y += p.vy;
            if(state === "CITY_VIEW") p.vy += p.gravity;
            p.life -= 0.015;
            ctx.globalAlpha = p.life;
            ctx.fillStyle = p.color;
            ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI*2); ctx.fill();
        });
        particles = particles.filter(p => p.life > 0);
        ctx.globalAlpha = 1;
        requestAnimationFrame(loop);
    }

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });

    run();
    loop();
</script>
</body>
</html>
