<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 - BON VINH BOSS</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Arial', sans-serif; }
        canvas { position: absolute; top: 0; left: 0; }
        #text-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #fff; text-align: center; z-index: 10; pointer-events: none; width: 100%;
        }
        .word { display: inline-block; margin: 0 10px; font-size: 50px; font-weight: bold; }
        .wish-text .word { font-size: 28px !important; color: #ff3333 !important; margin: 0 5px; }
    </style>
</head>
<body>
    <div id="text-overlay"></div>
    <canvas id="canvas"></canvas>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const textOverlay = document.getElementById('text-overlay');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particles = [];
    let state = "START";
    const wishes = [
        "Chúc Mừng Năm Mới 2026",
        "Vạn Sự Hanh Thông Tỷ Sự Như Mơ",
        "Sức Khỏe Dồi Dào Tài Lộc Tới",
        "Hạnh Phúc Đong Đầy Mọi Nẻo Đường",
        "Thành Công Vang Dội Tuổi Trẻ",
        "Bình An Mạnh Khỏe Mỗi Ngày",
        "Chào Đón 2026 Bùng Nổ Rạng Ngời"
    ];

    async function typeText(text, isWish = false) {
        textOverlay.innerHTML = "";
        if(isWish) textOverlay.className = "wish-text";
        else textOverlay.className = "";
        
        let words = text.split(" ");
        for (let word of words) {
            let span = document.createElement("span");
            span.className = "word";
            span.innerText = word;
            textOverlay.appendChild(span);
            await new Promise(r => setTimeout(r, 300)); // Gõ từng từ một cho chắc
        }
    }

    function createFirework(x, y, color) {
        for(let i=0; i<60; i++) {
            particles.push({
                x, y, vx: (Math.random()-0.5)*8, vy: (Math.random()-0.5)*8,
                life: 1, color: color, gravity: 0.1
            });
        }
    }

    async function run() {
        for (let i = 3; i > 0; i--) { textOverlay.innerHTML = `<div class="word" style="font-size:100px">${i}</div>`; await new Promise(r => setTimeout(r, 1000)); }
        
        await typeText("Năm Mới 2026");
        await new Promise(r => setTimeout(r, 2000));
        textOverlay.innerHTML = "";

        // Vẽ Trái Tim (Nhanh gọn chuẩn)
        state = "HEART";
        ctx.strokeStyle = "red"; ctx.lineWidth = 4; ctx.beginPath();
        for (let t = 0; t <= Math.PI * 2; t += 0.1) {
            const x = 16 * Math.pow(Math.sin(t), 3) * 12 + canvas.width/2;
            const y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t)) * 12 + canvas.height/2;
            ctx.lineTo(x, y); ctx.stroke();
            await new Promise(r => setTimeout(r, 20));
        }
        ctx.fillStyle = "red"; ctx.fill();
        await new Promise(r => setTimeout(r, 1000));
        ctx.clearRect(0,0,canvas.width,canvas.height);

        for (let wish of wishes) {
            await typeText(wish, true);
            await new Promise(r => setTimeout(r, 2500));
            createFirework(canvas.width/2, canvas.height/2, 'red');
            textOverlay.innerHTML = "";
            await new Promise(r => setTimeout(r, 1000));
        }

        textOverlay.innerHTML = `<div class="word" style="color:#0f0; font-size:30px">QUAY MÀN HÌNH NGANG ĐI ĐẠI CA!</div>`;
        state = "WAIT_ROTATE";
    }

    function drawCity() {
        const ground = canvas.height * 0.95;
        for(let i=0; i<canvas.width; i+=40) {
            const h = 180 + Math.sin(i)*60;
            ctx.fillStyle = "#080808"; // Nhà tối dồn nhau
            ctx.fillRect(i, ground - h, 38, h);
            
            ctx.fillStyle = "#fff"; // Đèn trắng theo yêu cầu
            for(let row=1; row < h/20; row++) {
                if(Math.random() > 0.4) ctx.fillRect(i+10, ground - h + (row*15), 5, 5);
                if(Math.random() > 0.4) ctx.fillRect(i+25, ground - h + (row*15), 5, 5);
            }
        }
    }

    function loop() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        if (window.innerWidth > window.innerHeight && state === "WAIT_ROTATE") {
            state = "CITY_VIEW";
            textOverlay.innerHTML = "";
        }

        if (state === "CITY_VIEW") {
            drawCity();
            if(Math.random() > 0.97) createFirework(Math.random()*canvas.width, 50 + Math.random()*150, `hsl(${Math.random()*360},100%,70%)`);
        }

        particles.forEach(p => {
            p.x += p.vx; p.y += p.vy;
            if(state === "CITY_VIEW") p.vy += p.gravity;
            p.life -= 0.02;
            ctx.globalAlpha = p.life;
            ctx.fillStyle = p.color;
            ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI*2); ctx.fill();
        });
        particles = particles.filter(p => p.life > 0);
        ctx.globalAlpha = 1;
        requestAnimationFrame(loop);
    }

    window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
    run(); loop();
</script>
</body>
</html>

